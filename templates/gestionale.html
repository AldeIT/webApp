{% extends "template.html" %}
{% block title %}Gestionale{% endblock %}
{%  block pagecontent %}
<center>
<h1>Gestionale</h1>

<form class="" action="" method="POST">

  <select name="scelta" class="form-select" id="inputGroupSelect01">
    <option selected>Seleziona il Gruppo</option>
    <option>Riparazioni</option>
    <option>Mezzi</option>
    <option>Clienti</option>
  </select>
  <br><br>
  <input type="submit" name="sub" value="MOSTRA">
  <br><br>
</form>

{% if controllo==0 %}
<div class="superioregestionale">
  <div class="card border-dark mb-3">
    <h4 class="card-header">Riparazioni</h4>
    <div class="card-body text-dark">
      {% for item in listariparazioni %}
        <form method="POST">
          <div class="form-row">
            <div class="col-auto">
              {%if stampa%}
                <label for="inlineFormCustomSelect">Stato</label>
              {%else%}
                <label class="sr-only" for="inlineFormCustomSelect">Stato</label>
              {%endif%}
              <select name={{item._id ~ "stato"}} class="custom-select mr-sm-2" id="inlineFormCustomSelect">
                {% if item.stato %}
                <option selected>Terminato</option>
                <option>In corso</option>
                {% else %}
                <option selected>In corso</option>
                <option>Terminato</option>
                {% endif %}
              </select>
            </div>

            <div class="col">
              {%if stampa%}
                <label for="inlineFormInputName2">Descrizione</label>
              {%else%}
                <label class="sr-only" for="inlineFormInputName2">Descrizione</label>
              {%endif%}
              <input value="{{item.descrizione}}" name={{item._id ~ "descrizione"}} type="text" class="form-control mb-2 mr-sm-2">
            </div>

            <div class="col-auto">
              {%if stampa%}
                <label for="inlineFormInputName2">Prezzo</label>
              {%else%}
                <label class="sr-only" for="inlineFormInputName2">Prezzo</label>
              {%endif%}
              <input value="{{item.prezzo}}" name={{item._id ~ "prezzo"}} type="text" class="form-control mb-2 mr-sm-2">
            </div>

            <div class="col-auto">
                <button name={{item._id}} type="submit" class="btn btn-primary mb-2">Conferma modifica</button>
            </div>

            <div class="col-auto">
              <button name={{item._id ~ "delete"}} type="submit" class="btn btn-primary mb-2">Elimina</button>
            </div>
          </div>
        </form>
        {% set stampa = False %}
      {% endfor %}
    </div>
  </div>
</div>


{% elif controllo==1 %}
<h1>Mezzi</h1>
<table>
<tr><td>Marca</td><td>Modello</td><td>Cilindrata</td><td>Potenza</td></tr>
{% for item in listamezzi %}
<tr>
<form action="" method="post">
  <td><input type="text" value={{item.marca}} name={{item.targa ~ "marca"}}></td>
  <td><input type="text" value={{item.modello}} name={{item.targa ~ "modello"}}></td>
  <td><input type="text" value={{item.cilindrata}} name={{item.targa ~ "cilindrata"}}></td>
  <td><input type="text" value={{item.potenza}} name={{item.targa ~ "potenza"}}></td>
  <td><input type="submit" name={{item.targa}} value="Conferma la modifica"></td>
  <td><input type="submit" name={{item.targa ~ "delete"}} value="Elimina"></td>
</form>
</tr>
{% endfor %}
</table>
{% elif controllo==2 %}
<h1>Clienti</h1>
<table>
<tr><td>Nome</td><td>Cognome</td><td>Telefono</td><td>Email</td></tr>
{% for item in listaclienti %}
<tr>
<form action="" method="post">
  <td><input type="text" value={{item.nome}} name={{item.cf ~ "nome"}}></td>
  <td><input type="text" value={{item.cognome}} name={{item.cf ~ "cognome"}}></td>
  <td><input type="text" value={{item.ntelefono}} name={{item.cf ~ "ntelefono"}}></td>
  <td><input type="text" value={{item.email}} name={{item.cf ~ "email"}}></td>
  <td><input type="submit" name={{item.cf}} value="Conferma la modifica"></td>
  <td><input type="submit" name={{item.cf ~ "delete"}} value="Elimina"></td>
</form>
</tr>
{% endfor %}
</table>
{% endif %}
</center>
{% endblock %}
